<html lang="en">
<head>
  <title>St. Xavier High School - Carpool Calendars</title>
  <script src="https://kit.fontawesome.com/b1df1a0fe6.js" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
  <script type='text/javascript'>
    window.addEventListener('load', () => {
      document.querySelectorAll('.cal-link-copy').forEach(link => {
        link.addEventListener('click', (event) => {
          copyLink(event);
        });
      });
    });

    function copyLink(event) {
        let anchor = document.getElementById(event.target.getAttribute('data-cal-id'));

        /* Copy the text inside the text field */
        navigator.clipboard.writeText(anchor.href);

        bootstrap.Toast.getOrCreateInstance(document.getElementById('copyToast')).show();
      }
  </script>
</head>
<body class="container">
<main>
<div class="toast-container top-50 start-50 translate-middle">
  <div class="toast align-items-center" role="alert" aria-live="assertive" aria-atomic="true" id="copyToast">
    <div class="d-flex">
      <div class="toast-body">
        Calendar link copied to clipboard!
      </div>
      <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
</div>

  <h2>St. Xavier High School - Carpool Calendars</h2>

  <% calendarYears.forEach((calendars, year) => { %>
    <h3>School Year <%=year%> - <%=year + 1%></h3>
    <ul>
      <% calendars.forEach(cal => { %>
        <li><a href='./<%=year%>/<%=cal.path%>' target='_new' id='<%=year%>-<%=cal.path%>'><%=cal.name%></a>&nbsp;
          <i class="fa-regular fa-clipboard cal-link-copy" style="cursor: pointer;" data-cal-id='<%=year%>-<%=cal.path%>'></i> 
          <a class="fa-brands fa-google-drive" style="text-decoration: none; color: inherit;" href="<%=cal.sheet%>" target="_new"></a> (<%=cal.description%>)
        </li>
      <% }); %>
    </ul>
  <% }); %>

    <h2>Usage</h2>
    <p>
    To subscribe to any of the above calendars, click the <i class='fa-regular fa-clipboard'></i> icon next to the
    calendar name to copy the ICS URL for the calendar to your clipboard,
    then use that in your favorite calendar program to subscribe. You can also link to the Google sheet with the <i class="fa-brands fa-google-drive"></i> icon next to each calendar.
    </p>
    <p>
    Here are some instructions for subscribing to an ICS calendar with some popular calendar apps:
    <ul>
      <li><a href='https://support.google.com/calendar/answer/37100?hl=en&co=GENIE.Platform%3DDesktop' target='_new'>Google Calendar</a> - instructions under "Use
      a link to add a public calendar"</li>
      <li><a href='https://support.apple.com/guide/iphone/use-multiple-calendars-iph3d1110d4/ios#:~:text=Go%20to%20Settings%20%3E%20Calendar%20%3E%20Accounts%20%3E%20Add%20Account%20%3E%20Other,any%20other%20required%20server%20information.' target='_new'>iOS (iPad, iPhone, Macbook, etc)</a> - instructions under "Subscribe to a Calendar"</li>
      <li><a href='https://www.cozi.com/how-to-add-an-ical-feed-to-cozi/' target='_new'>Cozi</a></li>
    </ul>
    </p>
    <p>
      You can also download the ICS file (just click the calendar name link), and import it into your favorite calendar, but this is not recommended.
      Downloading the file and importing will only give you a snapshot of the calendar when you downloaded it. Any updates to the 
      spreadsheet with the actual schedule will not be updated in your calendar. 
    </p>
</main>

</body>
</html>
